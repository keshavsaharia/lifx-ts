class LifxClient{constructor(){this.alive=false;this.ws=null}ready(e){document.addEventListener("DOMContentLoaded",e.bind(this))}post(e,t){var n=new XMLHttpRequest;var s=e.getAttribute("action");s+=(s.indexOf("?")>0?"&":"?")+"json=true";n.open("POST",s);n.onreadystatechange=function(){if(n.readyState==4){if(t)t(n.response)}};n.send(new URLSearchParams(new FormData(e)))}connect(){try{this.ws=new WebSocket("ws://"+window.location.host,["json"]);this.ws.addEventListener("open",(()=>{ws.send(JSON.stringify({hey:"there"}))}));this.ws.addEventListener("message",(e=>{console.log(e.data)}))}catch(e){console.log(e)}}receive(e){}}var lifx=new LifxClient;lifx.ready((function(){lifx.connect()}));